{% extends 'tube/base.html'%}
{% load crispy_forms_filters %}

{% block title %} Login {% endblock title%}

{% block content %}
    {% if not user.is_authenticated %}
        <div class="row">
            <div class="container d-flex justify-content-center mt-5" style="margin-top: 0 !important; min-height: 20px !important;">
                <div class="col-lg-6">
                    <form method="POST" class="form-group">
                        {{ form|crispy }}
                        {% csrf_token %}
                        <button type="submit" class="btn btn-success">Login</button>
                        <a href="{% url 'password_reset' %}" class=""><h6>Forgot Password?</h6></a>
                        <h6>Don't have an account? <a href="{% url 'register' %}" class="">Sign Up</a></h6>
                    </form>
                </div>
            </div>
        </div>
        {% else %}
        <div class="row box-element">
            <div class="col-lg-12">
                <h3>Already Logged in</h3>
            </div>
        </div>
        <div class="row box-element">
            <div class="col-lg-12">
            <a href="/"><h4>Go Home</h4></a>
            </div>
        </div>
        <div class="row box-element" style="display: none;" id="bluff">
            <div class="col-lg-12">
            <h1>Or let us just take you there <h1 style="display: none;" id="right"> right</h1> <h1 style="display: none;" id="now">Now</h1> </h1>
            </div>
        </div>
        <script>
            function toggleItem(id, toggle) {let element = document.getElementById(id);element.style.display = (toggle) ? 'block' : 'none';};
            
            setTimeout(()=>{toggleItem('bluff', true)}, 3000);
            setTimeout(()=>{toggleItem('right', true)}, 4750);
            setTimeout(()=>{toggleItem('now', true)}, 5750);
            setTimeout(() =>{window.location.href = "/";}, 6000); //  4500 is equivalent to 4.5 seconds
        </script>
    {% endif %}

{% endblock content %}
